{
  "title": "test",
  "data": {
    "url": "top_countries_citizenship.csv"
  },
  "width": "600",
  "height": "400",
  "encoding": {
    "x": {"aggregate": "sum", "field": "Number of arrivals"},
    "y": {"field": "Country of citizenship", "type":"nominal"}
  },
  "layer": [
    {
      "mark": "bar",
      "encoding": {
        "color": {"field": "Year"},
        "opacity": {
          "condition": {"selection": "series", "value": 1},
          "value": 0.2
        }
      },
      "selection": {
        "series": {
          "type": "multi",
          "encodings": ["color"],
          "on": "click",
          "bind": "legend"
        }
      }
    },
    {
      "transform": [{"filter": {"selection": "series"}}],
      "mark": {"type": "text", "dy": -5},
      "encoding": {"text": {"field": "1"}}
    }
  ]
}